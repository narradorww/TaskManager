appId: com.taskmanager
name: Add Task Test
tags:
  - e2e
  - add-task

---
- launchApp

# Aguardar o carregamento inicial (pode estar em loading)
- runFlow:
    when:
      visible: "dashboard-loading"
    commands:
      - assertVisible: "loading-text"
      - assertVisible: "Carregando tarefas..."

# Aguardar até que a tela principal apareça
- assertVisible: "dashboard-screen"

# Navegar para a tela de gerenciamento
- tapOn: "button-gerenciar-tarefas"
- assertVisible: "task-screen"

# Verificar se o formulário está presente
- assertVisible: "task-form-container"
- assertVisible: "add-task-form"
- assertVisible: "task-input"
- assertVisible: "add-task-button"

# Testar adição de tarefa vazia (deve falhar)
- tapOn: "task-input"
- inputText: ""
- tapOn: "add-task-button"

# Adicionar uma tarefa válida
- tapOn: "task-input"
- inputText: "Tarefa de teste E2E"
- tapOn: "add-task-button"

# Verificar se a tarefa foi adicionada
- assertVisible: "task-list"
- assertVisible: "task-item-*"
- assertVisible: "Tarefa de teste E2E"

# Adicionar mais uma tarefa
- tapOn: "task-input"
- inputText: "Segunda tarefa E2E"
- tapOn: "add-task-button"

# Verificar se ambas as tarefas estão presentes
- assertVisible: "Tarefa de teste E2E"
- assertVisible: "Segunda tarefa E2E"

# Testar com espaços em branco
- tapOn: "task-input"
- inputText: "   Tarefa com espaços   "
- tapOn: "add-task-button"

# Verificar se a tarefa foi adicionada sem espaços extras
- assertVisible: "Tarefa com espaços"
